# 簡単コンパイラ

学習用の簡単なコンパイラです。入力プログラムをコンパイルしてCASL-IIのソースコードを出力します。

## プログラムの説明

プログラムは複数の文からなります。変数、演算子、数字などのトークンの間には空白文字か改行が必要です。

### 代入文

`変数 = 式 ;` の形式です。変数はアルファベットで始まってアルファベット、数字、アンダースコアの連続からなる文字列です。

### ラベル

`ラベル:` の形式です。変数はアルファベットで始まってアルファベット、数字、アンダースコアの連続からなる文字列です。最後にコロンを付けます。

### if文

`if 式 : ラベル ;` の形式です。式を評価し、0でない場合にはラベルにジャンプします。

### goto文

`goto ラベル :` の形式です。無条件でラベルにジャンプします。

### 関数定義

`関数名: func 仮引数 :` の形式です。仮引数は必ず1個です。最後はセミコロンではなくコロンです。

### return文

`return ;` または `return 式 ;` の形式です。

### local文

`local 変数リスト ;` の形式です。変数リストは1個以上の変数をスペースで区切って並べます。

### 式

式は、10進整数（16ビット）、変数および演算子による演算が可能です。演算子は、+ (加算)、- （減算）、< （比較）、==（比較）のみです。
比較演算子は、条件が成立するときは0以外、成立しないときは0を返します。

関数呼び出しは `&関数名 式` の形式です。式の終わりはないので、例えば f(x)+1 のように関数の値にさらに演算をする式は書けず、関数呼び出しは必ず式の最後になります。

## コンパイラの使い方

```
ruby compile.rb [file]
```

ファイル名を指定すると、そのファイルからプログラムを読んでコンパイルします。ファイル名を省略すると、`a = ( b + 1 ) - 1 ;` というプログラムをコンパイルします。
